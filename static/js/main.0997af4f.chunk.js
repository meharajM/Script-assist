(this["webpackJsonpscript-assist"]=this["webpackJsonpscript-assist"]||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(6),i=n.n(o),r=(n(104),n(105),n(72)),s=n(22),l=n(35),u=n(36),d=n(41),m=n(40),f=n(196),h=n(198),v=n(60),E=n(84),p=n(85),g=n.n(p),b="CHARECTOR",C="ACTION",y="PARANTHETICAL",O="DIALOGUE",k="SCENE_HEADING",w="TRANSITION",j=function(e){return{type:y,id:"paranthetical-".concat(e.parantheticals)}},N=function(e){return{type:w,id:"transition-".concat(e.transition)}},S=function(e){return{type:O,id:"dialogue-".concat(e.dialogue)}},A=function(e){return{type:b,id:"character-".concat(e.charector)}},T=function(e){return{type:C,id:"action-".concat(e.action)}},D=(n(106),n(42)),L=n(86),H=n.n(L);n(110);var K=function(e){var t=e.value,n=e.elementRef,a=Object(D.a)(e,["value","elementRef"]);return c.a.createElement(H.a,Object.assign({innerRef:n,html:"".concat(t||""),tagName:"div"},a))};n(111);var R=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;Object(l.a)(this,n),a=t.call(this,e);var c=e.id;return a.int_id="".concat(c,"-int_ext"),a.location_id="".concat(c,"-location"),a.time_id="".concat(c,"-time"),a.summary_id="".concat(c,"-summary"),a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.onKeyDownHere,t=this.int_id,n=this.location_id,a=this.time_id,o=this.summary_id,i=this.props,r=i.content,s=i.sceneNumber,l=i.elementRef,u=i.onFocus,d=i.onKeyDown,m=Object(D.a)(i,["content","sceneNumber","elementRef","onFocus","onKeyDown"]);return c.a.createElement("div",null,c.a.createElement("div",{className:"scene-heading-summary-header"},c.a.createElement("div",{className:"scene-number"},"Scene ",s,": "),c.a.createElement(K,{key:o,className:"scene-heading-summary",id:o,placeholder:"  Scene description",value:r[o],onKeyDown:d})),c.a.createElement("div",{className:"scene-heading"},c.a.createElement(K,{key:t,className:"int-ext",placeholder:"INT/EXT",elementRef:l,id:t,onKeyUp:e,value:r[t],onFocus:u,onKeyDown:d}),c.a.createElement(K,{key:n,className:"location",placeholder:"LOCATION",id:n,onKeyUp:e,value:r[n],onFocus:u,onKeyDown:d}),c.a.createElement(K,Object.assign({key:a,className:"time",contentEditable:!0,placeholder:"DAY/NIGHT"},m,{onKeyUp:e,id:a,value:r[a],onFocus:u,onKeyDown:d}))))}}]),n}(c.a.Component);n(112);var I=function(e){var t=e.content,n=Object(D.a)(e,["content"]);return c.a.createElement("div",{className:"action"},c.a.createElement(K,Object.assign({placeholder:"Action",value:t[e.id]},n)))};n(113);var B=function(e){return c.a.createElement("div",{className:"charector"},c.a.createElement(K,Object.assign({placeholder:"Character name"},e,{value:e.content[e.id]})))};n(114);var P=function(e){return c.a.createElement("div",{className:"paranthetical"},c.a.createElement(K,Object.assign({placeholder:"describe state of charector"},e,{value:e.content[e.id]})))};n(115);var _=function(e){return c.a.createElement("div",{className:"dialogue"},c.a.createElement("div",{className:"dialogue-container"},c.a.createElement(K,Object.assign({placeholder:"Dialogue"},e,{value:e.content[e.id]}))))};n(116);var U=function(e){return c.a.createElement("div",{className:"transition"},c.a.createElement(K,Object.assign({className:"transition",contentEditable:!0,placeholder:"FADEIN/FADEOUT/CUTTO"},e,{value:e.content[e.id]})))},x=n(199),F=n(195);var W=function(e){var t=e.show,n=e.handleClose,a=e.addSceneHeading,o=e.addAction,i=e.insChar,r=e.addDialogue,s=e.addParanthetical,l=e.addTransition,u=function(e){e(),n()};return c.a.createElement(F.a,{id:"elements-menu",open:t,onClose:n},c.a.createElement(x.a,{onClick:function(){return u(a)}},"Scene heading"),c.a.createElement(x.a,{onClick:function(){return u(o)}},"Action"),c.a.createElement(x.a,{onClick:function(){return u(i)}},"Character"),c.a.createElement(x.a,{onClick:function(){return u(s)}},"Paranthetical"),c.a.createElement(x.a,{onClick:function(){return u(r)}},"Dialogue"),c.a.createElement(x.a,{onClick:function(){return u(l)}},"Transition"))};var G=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).setShow=function(e){a.setState({show:e})},a.onKeyDown=function(e){var t=a.props,n=t.removeElement,c=t.id,o=t.onContentChange,i=e.currentTarget.innerText,r=e.currentTarget.id,s=r.split("-"),l=Object(v.a)(s,3),u=l[0],d=(l[1],l[2]),m="Enter"===e.key,f="Backspace"===e.key,h=function(e,t,n){var a,c=n.addAction,o=n.addTransition,i=n.addDialogue,r=n.addParanthetical,s=n.insChar,l=n.addSceneHeading;switch(t&&e.toLowerCase()){case"s":a=l;break;case"a":a=c;break;case"t":a=o;break;case"d":a=i;break;case"p":a=r;break;case"c":a=s;break;default:a=null}return a}(e.key,e.shiftKey,a.props);if(h)h(),e.preventDefault();else if(m&&e.shiftKey)a.setShow(!a.state.show),e.preventDefault();else if(f&&!i.length)("sceneHeading"!==u||"sceneHeading"===u&&"int_ext"===d)&&(n(c),e.preventDefault());else if(!m||"character"!==u&&"paranthetical"!==u&&"sceneHeading"!==u){var E=e.key.toLowerCase();"sceneHeading"===u?"int_ext"===d?"i"===E?(i="INT",e.preventDefault()):"e"===E&&(i="EXT",e.preventDefault()):"time"===d&&("d"===E?(i="DAY",e.preventDefault()):"n"===E&&(i="NIGHT",e.preventDefault())):"transition"===u&&("c"===E?i="CUT TO":"fi"===i?i="FADE IN":"fo"===i&&(i="FADE OUT")),o(r,i)}else e.preventDefault()},a.state={show:!1},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,a=t.id,o=this.state.show,i={onKeyDown:this.onKeyDown},r=null;switch(n){case k:r=R;break;case C:r=I;break;case b:r=B;break;case y:r=P;break;case O:r=_;break;case w:r=U}return c.a.createElement("div",{className:"element"},c.a.createElement(r,Object.assign({key:a},i,this.props)),c.a.createElement(W,Object.assign({show:o},this.props,{handleClose:function(){e.setShow(!1)}})))}}]),n}(c.a.Component);n(118);var J=function(e){e.elements;var t=e.content,n=e.setElementCount,o=e.elementsCount,i=e.addBoard,r=e.elementsList,s=e.setElemetsList,l=e.currentElement,u=e.setCurrentElement,d=e.removeElement,m=Object(a.useRef)(null);Object(a.useEffect)((function(){m&&m.focus&&(m.focus(),document.execCommand("selectAll",!1,null),document.getSelection().collapseToEnd())}));var f=function(e){s(e),u(e.id)},h=function(e){m=e},v={removeElement:d,addAction:function(){f(T(o)),n({action:o.action+1})},addTransition:function(){f(N(o)),n({transition:o.transition+1})},addDialogue:function(){f(S(o)),n({dialogue:o.dialogue+1})},addParanthetical:function(){f(j(o)),n({parantheticals:o.parantheticals+1})},insChar:function(){f(A(o)),n({charector:o.charector+1})},addSceneHeading:function(){n({sceneHeading:o.sceneHeading+1}),i()},onContentChange:function(t,n){e.setContent(t,n)},content:t,onFocus:u};return c.a.createElement("div",{className:"board"},r.map((function(e){return c.a.createElement(G,Object.assign({},e,v,{elementRef:e.id===l?h:null}))})))},M=(n(119),f.a.TabPane),X=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this,e)).setElemetsList=function(e){a.setState((function(t){var n=t.elementsList;return Object(s.a)(Object(s.a)({},t),{},{elementsList:[].concat(Object(r.a)(n),[e])})}))},a.removeElement=function(e){var t=a.state.elementsList;if(t.length>1&&e){var n=t.filter((function(t){return t.id!==e}));a.setState({elementsList:n}),a.setCurrentElement(n[n.length-1].id),a.setContent(e,void 0,!0)}},a.setCurrentElement=function(e){a.setState({currentElement:e})},a.addBoard=function(){a.setState((function(e){var t=Object(r.a)(e.boards),n={id:t.length+1,note:""};return t.push(n),Object(s.a)(Object(s.a)({},e),{},{boards:t,activeBoard:n.id})}))},a.setContent=function(e,t,n){a.setState((function(a){var c=a.content,o=a.scriptContent;return n?(o.delete(e),delete c[e]):(o.set(e,t),c[e]=t),Object(s.a)(Object(s.a)({},a),{},{content:c,scriptContent:o})}))},a.setElementCount=function(e){a.setState((function(t){var n=t.elementsCount,a=Object(s.a)(Object(s.a)({},n),e);return Object(s.a)(Object(s.a)({},t),{},{elementsCount:a})}))},a.onTabChange=function(e){a.setState({activeBoard:e})},a.onSave=function(){!function(e){console.log(e);var t,n="",a=Object(E.a)(e);try{for(a.s();!(t=a.n()).done;){var c=Object(v.a)(t.value,2),o=(c[0],c[1]);n="".concat(n," ").concat(o)}}catch(r){a.e(r)}finally{a.f()}var i=new Blob([n],{type:"text/plain;charset=utf-8"});g.a.saveAs(i,"screenplay.txt")}(a.state.scriptContent)};var c={sceneHeading:1,action:0,charector:0,dialogue:0,parantheticals:0,transition:0};return a.state={boards:[{id:1,note:""}],activeBoard:1,content:{},scriptContent:new Map,elementsCount:c,elementsList:[{type:k,sceneNumber:c.sceneHeading,id:"sceneHeading-".concat(c.sceneHeading)}],currentElement:"sceneHeading-".concat(c.sceneHeading)},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.activeBoard,a=t.currentElement,o=t.elementsCount;return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header center"},"Script assist",c.a.createElement("div",{className:"options"},c.a.createElement(h.a,{className:"save-button",onClick:this.onSave},"Save"))),c.a.createElement("div",{className:"App-container"},c.a.createElement(f.a,{activeKey:n.toString(),className:"boards",onChange:this.onTabChange,tabPosition:"top",type:"editable-card",hideAdd:!0},this.state.boards.map((function(t,n){return c.a.createElement(M,{tab:"Scene-".concat(n+1),key:t.id.toString()},c.a.createElement(J,{id:t.id,content:e.state.content,setContent:e.setContent,elementsCount:e.state.elementsCount,setElementCount:e.setElementCount,addBoard:e.addBoard,elementsList:e.state.elementsList,setElemetsList:e.setElemetsList,currentElement:a,setCurrentElement:e.setCurrentElement,removeElement:e.removeElement})," ")})))),c.a.createElement("footer",null,/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)&&c.a.createElement("div",{className:"mobile-footer"},c.a.createElement("div",{className:"mobile-options"},c.a.createElement(h.a,{onClick:function(){e.setElementCount({sceneHeading:o.sceneHeading+1}),e.addBoard()}},"Scene heading"),c.a.createElement(h.a,{onClick:function(){e.setElemetsList(T(o)),e.setElementCount({action:o.action+1})}},"Action"),c.a.createElement(h.a,{onClick:function(){e.setElemetsList(A(o)),e.setElementCount({charector:o.charector+1})}},"Character"),c.a.createElement(h.a,{onClick:function(){e.setElemetsList(j(o)),e.setElementCount({parantheticals:o.parantheticals+1})}},"Paranthetical"),c.a.createElement(h.a,{onClick:function(){e.setElemetsList(S(o)),e.setElementCount({dialogue:o.dialogue+1})}},"Dialogue"),c.a.createElement(h.a,{onClick:function(){e.setElemetsList(N(o)),e.setElementCount({transition:o.transition+1})}},"Transition")))))}}]),n}(c.a.Component),Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(X,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Script-assist",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/Script-assist","/service-worker.js");Y?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):$(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):$(t,e)}))}}()},99:function(e,t,n){e.exports=n(170)}},[[99,1,2]]]);
//# sourceMappingURL=main.0997af4f.chunk.js.map